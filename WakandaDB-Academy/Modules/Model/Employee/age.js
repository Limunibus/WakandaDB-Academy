// Employee ageconst    MS_BY_YEAR = 1000 * 60 * 60 * 24 * 365.25;exports.kind = 'calculated';exports.type = 'number';exports.onGet = function ageOnGet() {    "use strict";    var        today,        interval,        nbYears,        age;    if (this.birthDate === null) {        age = 0;    } else {        today = new Date();        interval = today - this.birthDate;        nbYears = Math.floor(interval / MS_BY_YEAR);        age = nbYears;    }    return age;};exports.onSort = function ageOnSort(ascending) {    "use strict";    return (ascending ? "birthDate desc" : "birthDate");};exports.onQuery = function ageOnQuery(compOperator, age) {    "use strict";    var        not,        birthYearFromAgePlusOne,        lowerlimit,        upperlimit,        result;    if (age === null) {        not = ["=", "=="].indexOf(compOperator) > -1 ? 'not' : '';        result = "birthDate is" + not + 'null';    } else {        upperlimit = new Date();        birthYearFromAgePlusOne = upperlimit.getFullYear() - age;        upperlimit.setFullYear(birthYearFromAgePlusOne);        lowerlimit = new Date();        lowerlimit.setFullYear(birthYearFromAgePlusOne - 1);        switch (compOperator) {        case '!=':        case '!==':            not = true;            // don't break        case '=':        case '==':            result = "birthDate >= '" + lowerlimit.toISOString() + "'";            result += " and birthDate < '" + upperlimit.toISOString() + "'";            result = not ? ("not (" + result + ")") : result;            break;        case '>':            result = "birthDate < '" + lowerlimit.toISOString() + "'";            break;        case '>=':            result = "birthDate <= '" + upperlimit.toISOString() + "'";            break;        case '<':            result = "birthDate > '" + upperlimit.toISOString() + "'";            break;        case '<=':            result = "birthDate >= '" + lowerlimit.toISOString() + "'";            break;        default:            console.warn('unknown operator:', compOperator);            result = null;        }    }    return result;};